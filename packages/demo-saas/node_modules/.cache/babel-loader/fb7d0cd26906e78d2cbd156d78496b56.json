{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _includes from \"lodash/includes\";\nimport _compact from \"lodash/compact\";\nimport _map from \"lodash/map\";\nimport _every from \"lodash/every\";\nimport _without from \"lodash/without\";\nimport _find from \"lodash/find\";\nimport _dropRight from \"lodash/dropRight\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _size from \"lodash/size\";\nimport _difference from \"lodash/difference\";\nimport _union from \"lodash/union\";\nimport _get from \"lodash/get\";\nimport _noop from \"lodash/noop\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _invoke from \"lodash/invoke\";\nimport _has from \"lodash/has\";\nimport _isEqual from \"lodash/isEqual\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _isNil from \"lodash/isNil\";\nimport EventStack from '@semantic-ui-react/event-stack';\nimport { Ref } from '@fluentui/react-component-ref';\nimport cx from 'clsx';\nimport keyboardKey from 'keyboard-key';\nimport PropTypes from 'prop-types';\nimport React, { Children, cloneElement, createRef } from 'react';\nimport shallowEqual from 'shallowequal';\nimport { ModernAutoControlledComponent as Component, childrenUtils, customPropTypes, doesNodeContainClick, getElementType, getUnhandledProps, objectDiff, useKeyOnly, useKeyOrValueAndKey } from '../../lib';\nimport Icon from '../../elements/Icon';\nimport Label from '../../elements/Label';\nimport Flag from '../../elements/Flag';\nimport Image from '../../elements/Image';\nimport DropdownDivider from './DropdownDivider';\nimport DropdownItem from './DropdownItem';\nimport DropdownHeader from './DropdownHeader';\nimport DropdownMenu from './DropdownMenu';\nimport DropdownSearchInput from './DropdownSearchInput';\nimport DropdownText from './DropdownText';\nimport getMenuOptions from './utils/getMenuOptions';\nimport getSelectedIndex from './utils/getSelectedIndex';\n\nvar getKeyOrValue = function getKeyOrValue(key, value) {\n  return _isNil(key) ? value : key;\n};\n\nvar getKeyAndValues = function getKeyAndValues(options) {\n  return options ? options.map(function (option) {\n    return _pick(option, ['key', 'value']);\n  }) : options;\n};\n\nfunction renderItemContent(item) {\n  var flag = item.flag,\n      image = item.image,\n      text = item.text; // TODO: remove this in v2\n  // This maintains compatibility with Shorthand API in v1 as this might be called in \"Label.create()\"\n\n  if ( /*#__PURE__*/React.isValidElement(text) || _isFunction(text)) {\n    return text;\n  }\n\n  return {\n    content: /*#__PURE__*/React.createElement(React.Fragment, null, Flag.create(flag), Image.create(image), text)\n  };\n}\n/**\n * A dropdown allows a user to select a value from a series of options.\n * @see Form\n * @see Select\n * @see Menu\n */\n\n\nvar Dropdown = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Dropdown, _Component);\n\n  function Dropdown() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.searchRef = /*#__PURE__*/createRef();\n    _this.sizerRef = /*#__PURE__*/createRef();\n    _this.ref = /*#__PURE__*/createRef();\n\n    _this.handleChange = function (e, value) {\n      _invoke(_this.props, 'onChange', e, _extends({}, _this.props, {\n        value: value\n      }));\n    };\n\n    _this.closeOnChange = function (e) {\n      var _this$props = _this.props,\n          closeOnChange = _this$props.closeOnChange,\n          multiple = _this$props.multiple;\n      var shouldClose = _isUndefined(closeOnChange) ? !multiple : closeOnChange;\n\n      if (shouldClose) {\n        _this.close(e, _noop);\n      }\n    };\n\n    _this.closeOnEscape = function (e) {\n      if (!_this.props.closeOnEscape) return;\n      if (keyboardKey.getCode(e) !== keyboardKey.Escape) return;\n      e.preventDefault();\n\n      _this.close(e);\n    };\n\n    _this.moveSelectionOnKeyDown = function (e) {\n      var _moves;\n\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          selectOnNavigation = _this$props2.selectOnNavigation;\n      var open = _this.state.open;\n\n      if (!open) {\n        return;\n      }\n\n      var moves = (_moves = {}, _moves[keyboardKey.ArrowDown] = 1, _moves[keyboardKey.ArrowUp] = -1, _moves);\n      var move = moves[keyboardKey.getCode(e)];\n\n      if (move === undefined) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var nextIndex = _this.getSelectedIndexAfterMove(move);\n\n      if (!multiple && selectOnNavigation) {\n        _this.makeSelectedItemActive(e, nextIndex);\n      }\n\n      _this.setState({\n        selectedIndex: nextIndex\n      });\n    };\n\n    _this.openOnSpace = function (e) {\n      var _e$target, _e$target2, _e$target3;\n\n      var shouldHandleEvent = _this.state.focus && !_this.state.open && keyboardKey.getCode(e) === keyboardKey.Spacebar;\n      var shouldPreventDefault = ((_e$target = e.target) == null ? void 0 : _e$target.tagName) !== 'INPUT' && ((_e$target2 = e.target) == null ? void 0 : _e$target2.tagName) !== 'TEXTAREA' && ((_e$target3 = e.target) == null ? void 0 : _e$target3.isContentEditable) !== true;\n\n      if (shouldHandleEvent) {\n        if (shouldPreventDefault) {\n          e.preventDefault();\n        }\n\n        _this.open(e);\n      }\n    };\n\n    _this.openOnArrow = function (e) {\n      var _this$state = _this.state,\n          focus = _this$state.focus,\n          open = _this$state.open;\n\n      if (focus && !open) {\n        var code = keyboardKey.getCode(e);\n\n        if (code === keyboardKey.ArrowDown || code === keyboardKey.ArrowUp) {\n          e.preventDefault();\n\n          _this.open(e);\n        }\n      }\n    };\n\n    _this.makeSelectedItemActive = function (e, selectedIndex) {\n      var _this$state2 = _this.state,\n          open = _this$state2.open,\n          value = _this$state2.value;\n      var multiple = _this.props.multiple;\n\n      var item = _this.getSelectedItem(selectedIndex);\n\n      var selectedValue = _get(item, 'value'); // prevent selecting null if there was no selected item value\n      // prevent selecting duplicate items when the dropdown is closed\n\n\n      if (_isNil(selectedValue) || !open) {\n        return value;\n      } // state value may be undefined\n\n\n      var newValue = multiple ? _union(value, [selectedValue]) : selectedValue;\n      var valueHasChanged = multiple ? !!_difference(newValue, value).length : newValue !== value;\n\n      if (valueHasChanged) {\n        // notify the onChange prop that the user is trying to change value\n        _this.setState({\n          value: newValue\n        });\n\n        _this.handleChange(e, newValue); // Heads up! This event handler should be called after `onChange`\n        // Notify the onAddItem prop if this is a new value\n\n\n        if (item['data-additional']) {\n          _invoke(_this.props, 'onAddItem', e, _extends({}, _this.props, {\n            value: selectedValue\n          }));\n        }\n      }\n\n      return value;\n    };\n\n    _this.selectItemOnEnter = function (e) {\n      var search = _this.props.search;\n      var _this$state3 = _this.state,\n          open = _this$state3.open,\n          selectedIndex = _this$state3.selectedIndex;\n\n      if (!open) {\n        return;\n      }\n\n      var shouldSelect = keyboardKey.getCode(e) === keyboardKey.Enter || // https://github.com/Semantic-Org/Semantic-UI-React/pull/3766\n      !search && keyboardKey.getCode(e) === keyboardKey.Spacebar;\n\n      if (!shouldSelect) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var optionSize = _size(getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      }));\n\n      if (search && optionSize === 0) {\n        return;\n      }\n\n      var nextValue = _this.makeSelectedItemActive(e, selectedIndex); // This is required as selected value may be the same\n\n\n      _this.setState({\n        selectedIndex: getSelectedIndex({\n          additionLabel: _this.props.additionLabel,\n          additionPosition: _this.props.additionPosition,\n          allowAdditions: _this.props.allowAdditions,\n          deburr: _this.props.deburr,\n          multiple: _this.props.multiple,\n          search: _this.props.search,\n          selectedIndex: selectedIndex,\n          value: nextValue,\n          options: _this.props.options,\n          searchQuery: ''\n        })\n      });\n\n      _this.closeOnChange(e);\n\n      _this.clearSearchQuery();\n\n      if (search) {\n        _invoke(_this.searchRef.current, 'focus');\n      }\n    };\n\n    _this.removeItemOnBackspace = function (e) {\n      var _this$props3 = _this.props,\n          multiple = _this$props3.multiple,\n          search = _this$props3.search;\n      var _this$state4 = _this.state,\n          searchQuery = _this$state4.searchQuery,\n          value = _this$state4.value;\n      if (keyboardKey.getCode(e) !== keyboardKey.Backspace) return;\n      if (searchQuery || !search || !multiple || _isEmpty(value)) return;\n      e.preventDefault(); // remove most recent value\n\n      var newValue = _dropRight(value);\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.closeOnDocumentClick = function (e) {\n      if (!_this.props.closeOnBlur) return; // If event happened in the dropdown, ignore it\n\n      if (_this.ref.current && doesNodeContainClick(_this.ref.current, e)) return;\n\n      _this.close();\n    };\n\n    _this.handleMouseDown = function (e) {\n      _this.isMouseDown = true;\n\n      _invoke(_this.props, 'onMouseDown', e, _this.props);\n\n      document.addEventListener('mouseup', _this.handleDocumentMouseUp);\n    };\n\n    _this.handleDocumentMouseUp = function () {\n      _this.isMouseDown = false;\n      document.removeEventListener('mouseup', _this.handleDocumentMouseUp);\n    };\n\n    _this.handleClick = function (e) {\n      var _this$props4 = _this.props,\n          minCharacters = _this$props4.minCharacters,\n          search = _this$props4.search;\n      var _this$state5 = _this.state,\n          open = _this$state5.open,\n          searchQuery = _this$state5.searchQuery;\n\n      _invoke(_this.props, 'onClick', e, _this.props); // prevent closeOnDocumentClick()\n\n\n      e.stopPropagation();\n      if (!search) return _this.toggle(e);\n\n      if (open) {\n        _invoke(_this.searchRef.current, 'focus');\n\n        return;\n      }\n\n      if (searchQuery.length >= minCharacters || minCharacters === 1) {\n        _this.open(e);\n\n        return;\n      }\n\n      _invoke(_this.searchRef.current, 'focus');\n    };\n\n    _this.handleIconClick = function (e) {\n      var clearable = _this.props.clearable;\n\n      var hasValue = _this.hasValue();\n\n      _invoke(_this.props, 'onClick', e, _this.props); // prevent handleClick()\n\n\n      e.stopPropagation();\n\n      if (clearable && hasValue) {\n        _this.clearValue(e);\n      } else {\n        _this.toggle(e);\n      }\n    };\n\n    _this.handleItemClick = function (e, item) {\n      var _this$props5 = _this.props,\n          multiple = _this$props5.multiple,\n          search = _this$props5.search;\n      var currentValue = _this.state.value;\n      var value = item.value; // prevent toggle() in handleClick()\n\n      e.stopPropagation(); // prevent closeOnDocumentClick() if multiple or item is disabled\n\n      if (multiple || item.disabled) {\n        e.nativeEvent.stopImmediatePropagation();\n      }\n\n      if (item.disabled) {\n        return;\n      }\n\n      var isAdditionItem = item['data-additional'];\n      var newValue = multiple ? _union(_this.state.value, [value]) : value;\n      var valueHasChanged = multiple ? !!_difference(newValue, currentValue).length : newValue !== currentValue; // notify the onChange prop that the user is trying to change value\n\n      if (valueHasChanged) {\n        _this.setState({\n          value: newValue\n        });\n\n        _this.handleChange(e, newValue);\n      }\n\n      _this.clearSearchQuery();\n\n      if (search) {\n        _invoke(_this.searchRef.current, 'focus');\n      } else {\n        _invoke(_this.ref.current, 'focus');\n      }\n\n      _this.closeOnChange(e); // Heads up! This event handler should be called after `onChange`\n      // Notify the onAddItem prop if this is a new value\n\n\n      if (isAdditionItem) {\n        _invoke(_this.props, 'onAddItem', e, _extends({}, _this.props, {\n          value: value\n        }));\n      }\n    };\n\n    _this.handleFocus = function (e) {\n      var focus = _this.state.focus;\n      if (focus) return;\n\n      _invoke(_this.props, 'onFocus', e, _this.props);\n\n      _this.setState({\n        focus: true\n      });\n    };\n\n    _this.handleBlur = function (e) {\n      // Heads up! Don't remove this.\n      // https://github.com/Semantic-Org/Semantic-UI-React/issues/1315\n      var currentTarget = _get(e, 'currentTarget');\n\n      if (currentTarget && currentTarget.contains(document.activeElement)) return;\n      var _this$props6 = _this.props,\n          closeOnBlur = _this$props6.closeOnBlur,\n          multiple = _this$props6.multiple,\n          selectOnBlur = _this$props6.selectOnBlur; // do not \"blur\" when the mouse is down inside of the Dropdown\n\n      if (_this.isMouseDown) return;\n\n      _invoke(_this.props, 'onBlur', e, _this.props);\n\n      if (selectOnBlur && !multiple) {\n        _this.makeSelectedItemActive(e, _this.state.selectedIndex);\n\n        if (closeOnBlur) _this.close();\n      }\n\n      _this.setState({\n        focus: false\n      });\n\n      _this.clearSearchQuery();\n    };\n\n    _this.handleSearchChange = function (e, _ref) {\n      var value = _ref.value; // prevent propagating to this.props.onChange()\n\n      e.stopPropagation();\n      var minCharacters = _this.props.minCharacters;\n      var open = _this.state.open;\n      var newQuery = value;\n\n      _invoke(_this.props, 'onSearchChange', e, _extends({}, _this.props, {\n        searchQuery: newQuery\n      }));\n\n      _this.setState({\n        searchQuery: newQuery,\n        selectedIndex: 0\n      }); // open search dropdown on search query\n\n\n      if (!open && newQuery.length >= minCharacters) {\n        _this.open();\n\n        return;\n      } // close search dropdown if search query is too small\n\n\n      if (open && minCharacters !== 1 && newQuery.length < minCharacters) _this.close();\n    };\n\n    _this.handleKeyDown = function (e) {\n      _this.moveSelectionOnKeyDown(e);\n\n      _this.openOnArrow(e);\n\n      _this.openOnSpace(e);\n\n      _this.selectItemOnEnter(e);\n\n      _invoke(_this.props, 'onKeyDown', e);\n    };\n\n    _this.getSelectedItem = function (selectedIndex) {\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      });\n      return _get(options, \"[\" + selectedIndex + \"]\");\n    };\n\n    _this.getItemByValue = function (value) {\n      var options = _this.props.options;\n      return _find(options, {\n        value: value\n      });\n    };\n\n    _this.getDropdownAriaOptions = function () {\n      var _this$props7 = _this.props,\n          loading = _this$props7.loading,\n          disabled = _this$props7.disabled,\n          search = _this$props7.search,\n          multiple = _this$props7.multiple;\n      var open = _this.state.open;\n      var ariaOptions = {\n        role: search ? 'combobox' : 'listbox',\n        'aria-busy': loading,\n        'aria-disabled': disabled,\n        'aria-expanded': !!open\n      };\n\n      if (ariaOptions.role === 'listbox') {\n        ariaOptions['aria-multiselectable'] = multiple;\n      }\n\n      return ariaOptions;\n    };\n\n    _this.clearSearchQuery = function () {\n      var searchQuery = _this.state.searchQuery;\n      if (searchQuery === undefined || searchQuery === '') return;\n\n      _this.setState({\n        searchQuery: ''\n      });\n    };\n\n    _this.handleLabelClick = function (e, labelProps) {\n      // prevent focusing search input on click\n      e.stopPropagation();\n\n      _this.setState({\n        selectedLabel: labelProps.value\n      });\n\n      _invoke(_this.props, 'onLabelClick', e, labelProps);\n    };\n\n    _this.handleLabelRemove = function (e, labelProps) {\n      // prevent focusing search input on click\n      e.stopPropagation();\n      var value = _this.state.value;\n\n      var newValue = _without(value, labelProps.value);\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.getSelectedIndexAfterMove = function (offset, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = _this.state.selectedIndex;\n      }\n\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      }); // Prevent infinite loop\n      // TODO: remove left part of condition after children API will be removed\n\n      if (options === undefined || _every(options, 'disabled')) return;\n      var lastIndex = options.length - 1;\n      var wrapSelection = _this.props.wrapSelection; // next is after last, wrap to beginning\n      // next is before first, wrap to end\n\n      var nextIndex = startIndex + offset; // if 'wrapSelection' is set to false and selection is after last or before first, it just does not change\n\n      if (!wrapSelection && (nextIndex > lastIndex || nextIndex < 0)) {\n        nextIndex = startIndex;\n      } else if (nextIndex > lastIndex) {\n        nextIndex = 0;\n      } else if (nextIndex < 0) {\n        nextIndex = lastIndex;\n      }\n\n      if (options[nextIndex].disabled) {\n        return _this.getSelectedIndexAfterMove(offset, nextIndex);\n      }\n\n      return nextIndex;\n    };\n\n    _this.handleIconOverrides = function (predefinedProps) {\n      var clearable = _this.props.clearable;\n      var classes = cx(clearable && _this.hasValue() && 'clear', predefinedProps.className);\n      return {\n        className: classes,\n        onClick: function onClick(e) {\n          _invoke(predefinedProps, 'onClick', e, predefinedProps);\n\n          _this.handleIconClick(e);\n        }\n      };\n    };\n\n    _this.clearValue = function (e) {\n      var multiple = _this.props.multiple;\n      var newValue = multiple ? [] : '';\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.computeSearchInputTabIndex = function () {\n      var _this$props8 = _this.props,\n          disabled = _this$props8.disabled,\n          tabIndex = _this$props8.tabIndex;\n      if (!_isNil(tabIndex)) return tabIndex;\n      return disabled ? -1 : 0;\n    };\n\n    _this.computeSearchInputWidth = function () {\n      var searchQuery = _this.state.searchQuery;\n\n      if (_this.sizerRef.current && searchQuery) {\n        // resize the search input, temporarily show the sizer so we can measure it\n        _this.sizerRef.current.style.display = 'inline';\n        _this.sizerRef.current.textContent = searchQuery;\n        var searchWidth = Math.ceil(_this.sizerRef.current.getBoundingClientRect().width);\n\n        _this.sizerRef.current.style.removeProperty('display');\n\n        return searchWidth;\n      }\n    };\n\n    _this.computeTabIndex = function () {\n      var _this$props9 = _this.props,\n          disabled = _this$props9.disabled,\n          search = _this$props9.search,\n          tabIndex = _this$props9.tabIndex; // don't set a root node tabIndex as the search input has its own tabIndex\n\n      if (search) return undefined;\n      if (disabled) return -1;\n      return _isNil(tabIndex) ? 0 : tabIndex;\n    };\n\n    _this.handleSearchInputOverrides = function (predefinedProps) {\n      return {\n        onChange: function onChange(e, inputProps) {\n          _invoke(predefinedProps, 'onChange', e, inputProps);\n\n          _this.handleSearchChange(e, inputProps);\n        }\n      };\n    };\n\n    _this.hasValue = function () {\n      var multiple = _this.props.multiple;\n      var value = _this.state.value;\n      return multiple ? !_isEmpty(value) : !_isNil(value) && value !== '';\n    };\n\n    _this.scrollSelectedItemIntoView = function () {\n      if (!_this.ref.current) return;\n\n      var menu = _this.ref.current.querySelector('.menu.visible');\n\n      if (!menu) return;\n      var item = menu.querySelector('.item.selected');\n      if (!item) return;\n      var isOutOfUpperView = item.offsetTop < menu.scrollTop;\n      var isOutOfLowerView = item.offsetTop + item.clientHeight > menu.scrollTop + menu.clientHeight;\n\n      if (isOutOfUpperView) {\n        menu.scrollTop = item.offsetTop;\n      } else if (isOutOfLowerView) {\n        // eslint-disable-next-line no-mixed-operators\n        menu.scrollTop = item.offsetTop + item.clientHeight - menu.clientHeight;\n      }\n    };\n\n    _this.setOpenDirection = function () {\n      if (!_this.ref.current) return;\n\n      var menu = _this.ref.current.querySelector('.menu.visible');\n\n      if (!menu) return;\n\n      var dropdownRect = _this.ref.current.getBoundingClientRect();\n\n      var menuHeight = menu.clientHeight;\n      var spaceAtTheBottom = document.documentElement.clientHeight - dropdownRect.top - dropdownRect.height - menuHeight;\n      var spaceAtTheTop = dropdownRect.top - menuHeight;\n      var upward = spaceAtTheBottom < 0 && spaceAtTheTop > spaceAtTheBottom; // set state only if there's a relevant difference\n\n      if (!upward !== !_this.state.upward) {\n        _this.setState({\n          upward: upward\n        });\n      }\n    };\n\n    _this.open = function (e, triggerSetState) {\n      if (e === void 0) {\n        e = null;\n      }\n\n      if (triggerSetState === void 0) {\n        triggerSetState = true;\n      }\n\n      var _this$props10 = _this.props,\n          disabled = _this$props10.disabled,\n          search = _this$props10.search;\n      if (disabled) return;\n      if (search) _invoke(_this.searchRef.current, 'focus');\n\n      _invoke(_this.props, 'onOpen', e, _this.props);\n\n      if (triggerSetState) {\n        _this.setState({\n          open: true\n        });\n      }\n\n      _this.scrollSelectedItemIntoView();\n    };\n\n    _this.close = function (e, callback) {\n      if (callback === void 0) {\n        callback = _this.handleClose;\n      }\n\n      if (_this.state.open) {\n        _invoke(_this.props, 'onClose', e, _this.props);\n\n        _this.setState({\n          open: false\n        }, callback);\n      }\n    };\n\n    _this.handleClose = function () {\n      var hasSearchFocus = document.activeElement === _this.searchRef.current; // https://github.com/Semantic-Org/Semantic-UI-React/issues/627\n      // Blur the Dropdown on close so it is blurred after selecting an item.\n      // This is to prevent it from re-opening when switching tabs after selecting an item.\n\n      if (!hasSearchFocus && _this.ref.current) {\n        _this.ref.current.blur();\n      }\n\n      var hasDropdownFocus = document.activeElement === _this.ref.current;\n      var hasFocus = hasSearchFocus || hasDropdownFocus; // We need to keep the virtual model in sync with the browser focus change\n      // https://github.com/Semantic-Org/Semantic-UI-React/issues/692\n\n      _this.setState({\n        focus: hasFocus\n      });\n    };\n\n    _this.toggle = function (e) {\n      return _this.state.open ? _this.close(e) : _this.open(e);\n    };\n\n    _this.renderText = function () {\n      var _this$props11 = _this.props,\n          multiple = _this$props11.multiple,\n          placeholder = _this$props11.placeholder,\n          search = _this$props11.search,\n          text = _this$props11.text;\n      var _this$state6 = _this.state,\n          searchQuery = _this$state6.searchQuery,\n          selectedIndex = _this$state6.selectedIndex,\n          value = _this$state6.value,\n          open = _this$state6.open;\n\n      var hasValue = _this.hasValue();\n\n      var classes = cx(placeholder && !hasValue && 'default', 'text', search && searchQuery && 'filtered');\n      var _text = placeholder;\n      var selectedItem;\n\n      if (text) {\n        _text = text;\n      } else if (open && !multiple) {\n        selectedItem = _this.getSelectedItem(selectedIndex);\n      } else if (hasValue) {\n        selectedItem = _this.getItemByValue(value);\n      }\n\n      return DropdownText.create(selectedItem ? renderItemContent(selectedItem) : _text, {\n        defaultProps: {\n          className: classes\n        }\n      });\n    };\n\n    _this.renderSearchInput = function () {\n      var _this$props12 = _this.props,\n          search = _this$props12.search,\n          searchInput = _this$props12.searchInput;\n      var searchQuery = _this.state.searchQuery;\n      return search && /*#__PURE__*/React.createElement(Ref, {\n        innerRef: _this.searchRef\n      }, DropdownSearchInput.create(searchInput, {\n        defaultProps: {\n          style: {\n            width: _this.computeSearchInputWidth()\n          },\n          tabIndex: _this.computeSearchInputTabIndex(),\n          value: searchQuery\n        },\n        overrideProps: _this.handleSearchInputOverrides\n      }));\n    };\n\n    _this.renderSearchSizer = function () {\n      var _this$props13 = _this.props,\n          search = _this$props13.search,\n          multiple = _this$props13.multiple;\n      return search && multiple && /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sizer\",\n        ref: _this.sizerRef\n      });\n    };\n\n    _this.renderLabels = function () {\n      var _this$props14 = _this.props,\n          multiple = _this$props14.multiple,\n          renderLabel = _this$props14.renderLabel;\n      var _this$state7 = _this.state,\n          selectedLabel = _this$state7.selectedLabel,\n          value = _this$state7.value;\n\n      if (!multiple || _isEmpty(value)) {\n        return;\n      }\n\n      var selectedItems = _map(value, _this.getItemByValue); // if no item could be found for a given state value the selected item will be undefined\n      // compact the selectedItems so we only have actual objects left\n\n\n      return _map(_compact(selectedItems), function (item, index) {\n        var defaultProps = {\n          active: item.value === selectedLabel,\n          as: 'a',\n          key: getKeyOrValue(item.key, item.value),\n          onClick: _this.handleLabelClick,\n          onRemove: _this.handleLabelRemove,\n          value: item.value\n        };\n        return Label.create(renderLabel(item, index, defaultProps), {\n          defaultProps: defaultProps\n        });\n      });\n    };\n\n    _this.renderOptions = function () {\n      var _this$props15 = _this.props,\n          lazyLoad = _this$props15.lazyLoad,\n          multiple = _this$props15.multiple,\n          search = _this$props15.search,\n          noResultsMessage = _this$props15.noResultsMessage;\n      var _this$state8 = _this.state,\n          open = _this$state8.open,\n          selectedIndex = _this$state8.selectedIndex,\n          value = _this$state8.value; // lazy load, only render options when open\n\n      if (lazyLoad && !open) return null;\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      });\n\n      if (noResultsMessage !== null && search && _isEmpty(options)) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"message\"\n        }, noResultsMessage);\n      }\n\n      var isActive = multiple ? function (optValue) {\n        return _includes(value, optValue);\n      } : function (optValue) {\n        return optValue === value;\n      };\n      return _map(options, function (opt, i) {\n        return DropdownItem.create(_extends({\n          active: isActive(opt.value),\n          onClick: _this.handleItemClick,\n          selected: selectedIndex === i\n        }, opt, {\n          key: getKeyOrValue(opt.key, opt.value),\n          // Needed for handling click events on disabled items\n          style: _extends({}, opt.style, {\n            pointerEvents: 'all'\n          })\n        }));\n      });\n    };\n\n    _this.renderMenu = function () {\n      var _this$props16 = _this.props,\n          children = _this$props16.children,\n          direction = _this$props16.direction,\n          header = _this$props16.header;\n      var open = _this.state.open;\n\n      var ariaOptions = _this.getDropdownMenuAriaOptions(); // single menu child\n\n\n      if (!childrenUtils.isNil(children)) {\n        var menuChild = Children.only(children);\n        var className = cx(direction, useKeyOnly(open, 'visible'), menuChild.props.className);\n        return /*#__PURE__*/cloneElement(menuChild, _extends({\n          className: className\n        }, ariaOptions));\n      }\n\n      return /*#__PURE__*/React.createElement(DropdownMenu, _extends({}, ariaOptions, {\n        direction: direction,\n        open: open\n      }), DropdownHeader.create(header, {\n        autoGenerateKey: false\n      }), _this.renderOptions());\n    };\n\n    return _this;\n  }\n\n  var _proto = Dropdown.prototype;\n\n  _proto.getInitialAutoControlledState = function getInitialAutoControlledState() {\n    return {\n      focus: false,\n      searchQuery: ''\n    };\n  };\n\n  Dropdown.getAutoControlledStateFromProps = function getAutoControlledStateFromProps(nextProps, computedState, prevState) {\n    // These values are stored only for a comparison on next getAutoControlledStateFromProps()\n    var derivedState = {\n      __options: nextProps.options,\n      __value: computedState.value\n    }; // The selected index is only dependent:\n\n    var shouldComputeSelectedIndex = // On value change\n    !shallowEqual(prevState.__value, computedState.value) || // On option keys/values, we only check those properties to avoid recursive performance impacts.\n    // https://github.com/Semantic-Org/Semantic-UI-React/issues/3000\n    !_isEqual(getKeyAndValues(nextProps.options), getKeyAndValues(prevState.__options));\n\n    if (shouldComputeSelectedIndex) {\n      derivedState.selectedIndex = getSelectedIndex({\n        additionLabel: nextProps.additionLabel,\n        additionPosition: nextProps.additionPosition,\n        allowAdditions: nextProps.allowAdditions,\n        deburr: nextProps.deburr,\n        multiple: nextProps.multiple,\n        search: nextProps.search,\n        selectedIndex: computedState.selectedIndex,\n        value: computedState.value,\n        options: nextProps.options,\n        searchQuery: computedState.searchQuery\n      });\n    }\n\n    return derivedState;\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var open = this.state.open;\n\n    if (open) {\n      this.open(null, false);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    return !shallowEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // eslint-disable-line complexity\n    var _this$props17 = this.props,\n        closeOnBlur = _this$props17.closeOnBlur,\n        minCharacters = _this$props17.minCharacters,\n        openOnFocus = _this$props17.openOnFocus,\n        search = _this$props17.search;\n    /* eslint-disable no-console */\n\n    if (process.env.NODE_ENV !== 'production') {\n      // in development, validate value type matches dropdown type\n      var isNextValueArray = Array.isArray(this.props.value);\n\n      var hasValue = _has(this.props, 'value');\n\n      if (hasValue && this.props.multiple && !isNextValueArray) {\n        console.error('Dropdown `value` must be an array when `multiple` is set.' + (\" Received type: `\" + Object.prototype.toString.call(this.props.value) + \"`.\"));\n      } else if (hasValue && !this.props.multiple && isNextValueArray) {\n        console.error('Dropdown `value` must not be an array when `multiple` is not set.' + ' Either set `multiple={true}` or use a string or number value.');\n      }\n    }\n    /* eslint-enable no-console */\n    // focused / blurred\n\n\n    if (!prevState.focus && this.state.focus) {\n      if (!this.isMouseDown) {\n        var openable = !search || search && minCharacters === 1 && !this.state.open;\n        if (openOnFocus && openable) this.open();\n      }\n    } else if (prevState.focus && !this.state.focus) {\n      if (!this.isMouseDown && closeOnBlur) {\n        this.close();\n      }\n    } // opened / closed\n\n\n    if (!prevState.open && this.state.open) {\n      this.setOpenDirection();\n      this.scrollSelectedItemIntoView();\n    } else if (prevState.open && !this.state.open) {}\n\n    if (prevState.selectedIndex !== this.state.selectedIndex) {\n      this.scrollSelectedItemIntoView();\n    }\n  } // ----------------------------------------\n  // Document Event Handlers\n  // ----------------------------------------\n  // onChange needs to receive a value\n  // can't rely on props.value if we are controlled\n  ;\n\n  _proto.getDropdownMenuAriaOptions = function getDropdownMenuAriaOptions() {\n    var _this$props18 = this.props,\n        search = _this$props18.search,\n        multiple = _this$props18.multiple;\n    var ariaOptions = {};\n\n    if (search) {\n      ariaOptions['aria-multiselectable'] = multiple;\n      ariaOptions.role = 'listbox';\n    }\n\n    return ariaOptions;\n  } // ----------------------------------------\n  // Setters\n  // ----------------------------------------\n  ;\n\n  _proto.render = function render() {\n    var _this$props19 = this.props,\n        basic = _this$props19.basic,\n        button = _this$props19.button,\n        className = _this$props19.className,\n        compact = _this$props19.compact,\n        disabled = _this$props19.disabled,\n        error = _this$props19.error,\n        fluid = _this$props19.fluid,\n        floating = _this$props19.floating,\n        icon = _this$props19.icon,\n        inline = _this$props19.inline,\n        item = _this$props19.item,\n        labeled = _this$props19.labeled,\n        loading = _this$props19.loading,\n        multiple = _this$props19.multiple,\n        pointing = _this$props19.pointing,\n        search = _this$props19.search,\n        selection = _this$props19.selection,\n        scrolling = _this$props19.scrolling,\n        simple = _this$props19.simple,\n        trigger = _this$props19.trigger;\n    var _this$state9 = this.state,\n        focus = _this$state9.focus,\n        open = _this$state9.open,\n        upward = _this$state9.upward; // Classes\n\n    var classes = cx('ui', useKeyOnly(open, 'active visible'), useKeyOnly(disabled, 'disabled'), useKeyOnly(error, 'error'), useKeyOnly(loading, 'loading'), useKeyOnly(basic, 'basic'), useKeyOnly(button, 'button'), useKeyOnly(compact, 'compact'), useKeyOnly(fluid, 'fluid'), useKeyOnly(floating, 'floating'), useKeyOnly(inline, 'inline'), // TODO: consider augmentation to render Dropdowns as Button/Menu, solves icon/link item issues\n    // https://github.com/Semantic-Org/Semantic-UI-React/issues/401#issuecomment-240487229\n    // TODO: the icon class is only required when a dropdown is a button\n    // useKeyOnly(icon, 'icon'),\n    useKeyOnly(labeled, 'labeled'), useKeyOnly(item, 'item'), useKeyOnly(multiple, 'multiple'), useKeyOnly(search, 'search'), useKeyOnly(selection, 'selection'), useKeyOnly(simple, 'simple'), useKeyOnly(scrolling, 'scrolling'), useKeyOnly(upward, 'upward'), useKeyOrValueAndKey(pointing, 'pointing'), 'dropdown', className);\n    var rest = getUnhandledProps(Dropdown, this.props);\n    var ElementType = getElementType(Dropdown, this.props);\n    var ariaOptions = this.getDropdownAriaOptions(ElementType, this.props);\n    return /*#__PURE__*/React.createElement(Ref, {\n      innerRef: this.ref\n    }, /*#__PURE__*/React.createElement(ElementType, _extends({}, rest, ariaOptions, {\n      className: classes,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeyDown,\n      onMouseDown: this.handleMouseDown,\n      onFocus: this.handleFocus,\n      onChange: this.handleChange,\n      tabIndex: this.computeTabIndex()\n    }), this.renderLabels(), this.renderSearchInput(), this.renderSearchSizer(), trigger || this.renderText(), Icon.create(icon, {\n      overrideProps: this.handleIconOverrides,\n      autoGenerateKey: false\n    }), this.renderMenu(), open && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"keydown\",\n      on: this.closeOnEscape\n    }), open && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"click\",\n      on: this.closeOnDocumentClick\n    }), focus && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"keydown\",\n      on: this.removeItemOnBackspace\n    })));\n  };\n\n  return Dropdown;\n}(Component);\n\nDropdown.handledProps = [\"additionLabel\", \"additionPosition\", \"allowAdditions\", \"as\", \"basic\", \"button\", \"children\", \"className\", \"clearable\", \"closeOnBlur\", \"closeOnChange\", \"closeOnEscape\", \"compact\", \"deburr\", \"defaultOpen\", \"defaultSearchQuery\", \"defaultSelectedLabel\", \"defaultUpward\", \"defaultValue\", \"direction\", \"disabled\", \"error\", \"floating\", \"fluid\", \"header\", \"icon\", \"inline\", \"item\", \"labeled\", \"lazyLoad\", \"loading\", \"minCharacters\", \"multiple\", \"noResultsMessage\", \"onAddItem\", \"onBlur\", \"onChange\", \"onClick\", \"onClose\", \"onFocus\", \"onLabelClick\", \"onMouseDown\", \"onOpen\", \"onSearchChange\", \"open\", \"openOnFocus\", \"options\", \"placeholder\", \"pointing\", \"renderLabel\", \"scrolling\", \"search\", \"searchInput\", \"searchQuery\", \"selectOnBlur\", \"selectOnNavigation\", \"selectedLabel\", \"selection\", \"simple\", \"tabIndex\", \"text\", \"trigger\", \"upward\", \"value\", \"wrapSelection\"];\nexport { Dropdown as default };\nDropdown.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Label prefixed to an option added by a user. */\n  additionLabel: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n\n  /** Position of the `Add: ...` option in the dropdown list ('top' or 'bottom'). */\n  additionPosition: PropTypes.oneOf(['top', 'bottom']),\n\n  /**\n   * Allow user additions to the list of options (boolean).\n   * Requires the use of `selection`, `options` and `search`.\n   */\n  allowAdditions: customPropTypes.every([customPropTypes.demand(['options', 'selection', 'search']), PropTypes.bool]),\n\n  /** A Dropdown can reduce its complexity. */\n  basic: PropTypes.bool,\n\n  /** Format the Dropdown to appear as a button. */\n  button: PropTypes.bool,\n\n  /** Primary content. */\n  children: customPropTypes.every([customPropTypes.disallow(['options', 'selection']), customPropTypes.givenProps({\n    children: PropTypes.any.isRequired\n  }, PropTypes.element.isRequired)]),\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Using the clearable setting will let users remove their selection from a dropdown. */\n  clearable: PropTypes.bool,\n\n  /** Whether or not the menu should close when the dropdown is blurred. */\n  closeOnBlur: PropTypes.bool,\n\n  /** Whether or not the dropdown should close when the escape key is pressed. */\n  closeOnEscape: PropTypes.bool,\n\n  /**\n   * Whether or not the menu should close when a value is selected from the dropdown.\n   * By default, multiple selection dropdowns will remain open on change, while single\n   * selection dropdowns will close on change.\n   */\n  closeOnChange: PropTypes.bool,\n\n  /** A compact dropdown has no minimum width. */\n  compact: PropTypes.bool,\n\n  /** Whether or not the dropdown should strip diacritics in options and input search */\n  deburr: PropTypes.bool,\n\n  /** Initial value of open. */\n  defaultOpen: PropTypes.bool,\n\n  /** Initial value of searchQuery. */\n  defaultSearchQuery: PropTypes.string,\n\n  /** Currently selected label in multi-select. */\n  defaultSelectedLabel: customPropTypes.every([customPropTypes.demand(['multiple']), PropTypes.oneOfType([PropTypes.number, PropTypes.string])]),\n\n  /** Initial value of upward. */\n  defaultUpward: PropTypes.bool,\n\n  /** Initial value or value array if multiple. */\n  defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.bool, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]))]),\n\n  /** A dropdown menu can open to the left or to the right. */\n  direction: PropTypes.oneOf(['left', 'right']),\n\n  /** A disabled dropdown menu or item does not allow user interaction. */\n  disabled: PropTypes.bool,\n\n  /** An errored dropdown can alert a user to a problem. */\n  error: PropTypes.bool,\n\n  /** A dropdown menu can contain floated content. */\n  floating: PropTypes.bool,\n\n  /** A dropdown can take the full width of its parent */\n  fluid: PropTypes.bool,\n\n  /** A dropdown menu can contain a header. */\n  header: PropTypes.node,\n\n  /** Shorthand for Icon. */\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.object]),\n\n  /** A dropdown can be formatted to appear inline in other content. */\n  inline: PropTypes.bool,\n\n  /** A dropdown can be formatted as a Menu item. */\n  item: PropTypes.bool,\n\n  /** A dropdown can be labeled. */\n  labeled: PropTypes.bool,\n\n  /** A dropdown can defer rendering its options until it is open. */\n  lazyLoad: PropTypes.bool,\n\n  /** A dropdown can show that it is currently loading data. */\n  loading: PropTypes.bool,\n\n  /** The minimum characters for a search to begin showing results. */\n  minCharacters: PropTypes.number,\n\n  /** A selection dropdown can allow multiple selections. */\n  multiple: PropTypes.bool,\n\n  /** Message to display when there are no results. */\n  noResultsMessage: PropTypes.node,\n\n  /**\n   * Called when a user adds a new item. Use this to update the options list.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props and the new item's value.\n   */\n  onAddItem: PropTypes.func,\n\n  /**\n   * Called on blur.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * Called when the user attempts to change the value.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props and proposed value.\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * Called on click.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * Called when a close event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Called on focus.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * Called when a multi-select label is clicked.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All label props.\n   */\n  onLabelClick: PropTypes.func,\n\n  /**\n   * Called on mousedown.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onMouseDown: PropTypes.func,\n\n  /**\n   * Called when an open event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onOpen: PropTypes.func,\n\n  /**\n   * Called on search input change.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props, includes current value of searchQuery.\n   */\n  onSearchChange: PropTypes.func,\n\n  /** Controls whether or not the dropdown menu is displayed. */\n  open: PropTypes.bool,\n\n  /** Whether or not the menu should open when the dropdown is focused. */\n  openOnFocus: PropTypes.bool,\n\n  /** Array of Dropdown.Item props e.g. `{ text: '', value: '' }` */\n  options: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.arrayOf(PropTypes.shape(DropdownItem.propTypes))]),\n\n  /** Placeholder text. */\n  placeholder: PropTypes.string,\n\n  /** A dropdown can be formatted so that its menu is pointing. */\n  pointing: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['left', 'right', 'top', 'top left', 'top right', 'bottom', 'bottom left', 'bottom right'])]),\n\n  /**\n   * Mapped over the active items and returns shorthand for the active item Labels.\n   * Only applies to `multiple` Dropdowns.\n   *\n   * @param {object} item - A currently active dropdown item.\n   * @param {number} index - The current index.\n   * @param {object} defaultLabelProps - The default props for an active item Label.\n   * @returns {*} Shorthand for a Label.\n   */\n  renderLabel: PropTypes.func,\n\n  /** A dropdown can have its menu scroll. */\n  scrolling: PropTypes.bool,\n\n  /**\n   * A selection dropdown can allow a user to search through a large list of choices.\n   * Pass a function here to replace the default search.\n   */\n  search: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n\n  /** A shorthand for a search input. */\n  searchInput: PropTypes.oneOfType([PropTypes.array, PropTypes.node, PropTypes.object]),\n\n  /** Current value of searchQuery. Creates a controlled component. */\n  searchQuery: PropTypes.string,\n  // TODO 'searchInMenu' or 'search='in menu' or ???  How to handle this markup and functionality?\n\n  /** Define whether the highlighted item should be selected on blur. */\n  selectOnBlur: PropTypes.bool,\n\n  /**\n   * Whether or not to change the value when navigating the menu using arrow keys.\n   * Setting to false will require enter or left click to confirm a choice.\n   */\n  selectOnNavigation: PropTypes.bool,\n\n  /** Currently selected label in multi-select. */\n  selectedLabel: customPropTypes.every([customPropTypes.demand(['multiple']), PropTypes.oneOfType([PropTypes.string, PropTypes.number])]),\n\n  /** A dropdown can be used to select between choices in a form. */\n  selection: customPropTypes.every([customPropTypes.disallow(['children']), customPropTypes.demand(['options']), PropTypes.bool]),\n\n  /** A simple dropdown can open without Javascript. */\n  simple: PropTypes.bool,\n\n  /** A dropdown can receive focus. */\n  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /** The text displayed in the dropdown, usually for the active item. */\n  text: PropTypes.string,\n\n  /** Custom element to trigger the menu to become visible. Takes place of 'text'. */\n  trigger: customPropTypes.every([customPropTypes.disallow(['selection', 'text']), PropTypes.node]),\n\n  /** Current value or value array if multiple. Creates a controlled component. */\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number]))]),\n\n  /** Controls whether the dropdown will open upward. */\n  upward: PropTypes.bool,\n\n  /**\n   * A dropdown will go to the last element when ArrowUp is pressed on the first,\n   * or go to the first when ArrowDown is pressed on the last( aka infinite selection )\n   */\n  wrapSelection: PropTypes.bool\n} : {};\nDropdown.defaultProps = {\n  additionLabel: 'Add ',\n  additionPosition: 'top',\n  closeOnBlur: true,\n  closeOnEscape: true,\n  deburr: false,\n  icon: 'dropdown',\n  minCharacters: 1,\n  noResultsMessage: 'No results found.',\n  openOnFocus: true,\n  renderLabel: renderItemContent,\n  searchInput: 'text',\n  selectOnBlur: true,\n  selectOnNavigation: true,\n  wrapSelection: true\n};\nDropdown.autoControlledProps = ['open', 'searchQuery', 'selectedLabel', 'value', 'upward'];\nDropdown.Divider = DropdownDivider;\nDropdown.Header = DropdownHeader;\nDropdown.Item = DropdownItem;\nDropdown.Menu = DropdownMenu;\nDropdown.SearchInput = DropdownSearchInput;\nDropdown.Text = DropdownText;","map":{"version":3,"sources":["/Users/eldad/frontegg/frontegg-react-libs/packages/elements-semantic/node_modules/semantic-ui-react/dist/es/modules/Dropdown/Dropdown.js"],"names":["_extends","_inheritsLoose","_includes","_compact","_map","_every","_without","_find","_dropRight","_isEmpty","_size","_difference","_union","_get","_noop","_isUndefined","_invoke","_has","_isEqual","_isFunction","_pick","_isNil","EventStack","Ref","cx","keyboardKey","PropTypes","React","Children","cloneElement","createRef","shallowEqual","ModernAutoControlledComponent","Component","childrenUtils","customPropTypes","doesNodeContainClick","getElementType","getUnhandledProps","objectDiff","useKeyOnly","useKeyOrValueAndKey","Icon","Label","Flag","Image","DropdownDivider","DropdownItem","DropdownHeader","DropdownMenu","DropdownSearchInput","DropdownText","getMenuOptions","getSelectedIndex","getKeyOrValue","key","value","getKeyAndValues","options","map","option","renderItemContent","item","flag","image","text","isValidElement","content","createElement","Fragment","create","Dropdown","_Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","searchRef","sizerRef","ref","handleChange","e","props","closeOnChange","_this$props","multiple","shouldClose","close","closeOnEscape","getCode","Escape","preventDefault","moveSelectionOnKeyDown","_moves","_this$props2","selectOnNavigation","open","state","moves","ArrowDown","ArrowUp","move","undefined","nextIndex","getSelectedIndexAfterMove","makeSelectedItemActive","setState","selectedIndex","openOnSpace","_e$target","_e$target2","_e$target3","shouldHandleEvent","focus","Spacebar","shouldPreventDefault","target","tagName","isContentEditable","openOnArrow","_this$state","code","_this$state2","getSelectedItem","selectedValue","newValue","valueHasChanged","selectItemOnEnter","search","_this$state3","shouldSelect","Enter","optionSize","searchQuery","additionLabel","additionPosition","allowAdditions","deburr","nextValue","clearSearchQuery","current","removeItemOnBackspace","_this$props3","_this$state4","Backspace","closeOnDocumentClick","closeOnBlur","handleMouseDown","isMouseDown","document","addEventListener","handleDocumentMouseUp","removeEventListener","handleClick","_this$props4","minCharacters","_this$state5","stopPropagation","toggle","handleIconClick","clearable","hasValue","clearValue","handleItemClick","_this$props5","currentValue","disabled","nativeEvent","stopImmediatePropagation","isAdditionItem","handleFocus","handleBlur","currentTarget","contains","activeElement","_this$props6","selectOnBlur","handleSearchChange","_ref","newQuery","handleKeyDown","getItemByValue","getDropdownAriaOptions","_this$props7","loading","ariaOptions","role","handleLabelClick","labelProps","selectedLabel","handleLabelRemove","offset","startIndex","lastIndex","wrapSelection","handleIconOverrides","predefinedProps","classes","className","onClick","computeSearchInputTabIndex","_this$props8","tabIndex","computeSearchInputWidth","style","display","textContent","searchWidth","Math","ceil","getBoundingClientRect","width","removeProperty","computeTabIndex","_this$props9","handleSearchInputOverrides","onChange","inputProps","scrollSelectedItemIntoView","menu","querySelector","isOutOfUpperView","offsetTop","scrollTop","isOutOfLowerView","clientHeight","setOpenDirection","dropdownRect","menuHeight","spaceAtTheBottom","documentElement","top","height","spaceAtTheTop","upward","triggerSetState","_this$props10","callback","handleClose","hasSearchFocus","blur","hasDropdownFocus","hasFocus","renderText","_this$props11","placeholder","_this$state6","_text","selectedItem","defaultProps","renderSearchInput","_this$props12","searchInput","innerRef","overrideProps","renderSearchSizer","_this$props13","renderLabels","_this$props14","renderLabel","_this$state7","selectedItems","index","active","as","onRemove","renderOptions","_this$props15","lazyLoad","noResultsMessage","_this$state8","isActive","optValue","opt","i","selected","pointerEvents","renderMenu","_this$props16","children","direction","header","getDropdownMenuAriaOptions","isNil","menuChild","only","autoGenerateKey","_proto","prototype","getInitialAutoControlledState","getAutoControlledStateFromProps","nextProps","computedState","prevState","derivedState","__options","__value","shouldComputeSelectedIndex","componentDidMount","shouldComponentUpdate","nextState","componentDidUpdate","prevProps","_this$props17","openOnFocus","process","env","NODE_ENV","isNextValueArray","isArray","console","error","Object","toString","openable","_this$props18","render","_this$props19","basic","button","compact","fluid","floating","icon","inline","labeled","pointing","selection","scrolling","simple","trigger","_this$state9","rest","ElementType","onBlur","onKeyDown","onMouseDown","onFocus","name","on","handledProps","default","propTypes","elementType","oneOfType","element","string","oneOf","every","demand","bool","disallow","givenProps","any","isRequired","defaultOpen","defaultSearchQuery","defaultSelectedLabel","number","defaultUpward","defaultValue","arrayOf","node","object","onAddItem","func","onClose","onLabelClick","onOpen","onSearchChange","shape","array","autoControlledProps","Divider","Header","Item","Menu","SearchInput","Text"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _includes from \"lodash/includes\";\nimport _compact from \"lodash/compact\";\nimport _map from \"lodash/map\";\nimport _every from \"lodash/every\";\nimport _without from \"lodash/without\";\nimport _find from \"lodash/find\";\nimport _dropRight from \"lodash/dropRight\";\nimport _isEmpty from \"lodash/isEmpty\";\nimport _size from \"lodash/size\";\nimport _difference from \"lodash/difference\";\nimport _union from \"lodash/union\";\nimport _get from \"lodash/get\";\nimport _noop from \"lodash/noop\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _invoke from \"lodash/invoke\";\nimport _has from \"lodash/has\";\nimport _isEqual from \"lodash/isEqual\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _isNil from \"lodash/isNil\";\nimport EventStack from '@semantic-ui-react/event-stack';\nimport { Ref } from '@fluentui/react-component-ref';\nimport cx from 'clsx';\nimport keyboardKey from 'keyboard-key';\nimport PropTypes from 'prop-types';\nimport React, { Children, cloneElement, createRef } from 'react';\nimport shallowEqual from 'shallowequal';\nimport { ModernAutoControlledComponent as Component, childrenUtils, customPropTypes, doesNodeContainClick, getElementType, getUnhandledProps, objectDiff, useKeyOnly, useKeyOrValueAndKey } from '../../lib';\nimport Icon from '../../elements/Icon';\nimport Label from '../../elements/Label';\nimport Flag from '../../elements/Flag';\nimport Image from '../../elements/Image';\nimport DropdownDivider from './DropdownDivider';\nimport DropdownItem from './DropdownItem';\nimport DropdownHeader from './DropdownHeader';\nimport DropdownMenu from './DropdownMenu';\nimport DropdownSearchInput from './DropdownSearchInput';\nimport DropdownText from './DropdownText';\nimport getMenuOptions from './utils/getMenuOptions';\nimport getSelectedIndex from './utils/getSelectedIndex';\n\nvar getKeyOrValue = function getKeyOrValue(key, value) {\n  return _isNil(key) ? value : key;\n};\n\nvar getKeyAndValues = function getKeyAndValues(options) {\n  return options ? options.map(function (option) {\n    return _pick(option, ['key', 'value']);\n  }) : options;\n};\n\nfunction renderItemContent(item) {\n  var flag = item.flag,\n      image = item.image,\n      text = item.text; // TODO: remove this in v2\n  // This maintains compatibility with Shorthand API in v1 as this might be called in \"Label.create()\"\n\n  if ( /*#__PURE__*/React.isValidElement(text) || _isFunction(text)) {\n    return text;\n  }\n\n  return {\n    content: /*#__PURE__*/React.createElement(React.Fragment, null, Flag.create(flag), Image.create(image), text)\n  };\n}\n/**\n * A dropdown allows a user to select a value from a series of options.\n * @see Form\n * @see Select\n * @see Menu\n */\n\n\nvar Dropdown = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Dropdown, _Component);\n\n  function Dropdown() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.searchRef = /*#__PURE__*/createRef();\n    _this.sizerRef = /*#__PURE__*/createRef();\n    _this.ref = /*#__PURE__*/createRef();\n\n    _this.handleChange = function (e, value) {\n      _invoke(_this.props, 'onChange', e, _extends({}, _this.props, {\n        value: value\n      }));\n    };\n\n    _this.closeOnChange = function (e) {\n      var _this$props = _this.props,\n          closeOnChange = _this$props.closeOnChange,\n          multiple = _this$props.multiple;\n      var shouldClose = _isUndefined(closeOnChange) ? !multiple : closeOnChange;\n\n      if (shouldClose) {\n        _this.close(e, _noop);\n      }\n    };\n\n    _this.closeOnEscape = function (e) {\n      if (!_this.props.closeOnEscape) return;\n      if (keyboardKey.getCode(e) !== keyboardKey.Escape) return;\n      e.preventDefault();\n\n      _this.close(e);\n    };\n\n    _this.moveSelectionOnKeyDown = function (e) {\n      var _moves;\n\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          selectOnNavigation = _this$props2.selectOnNavigation;\n      var open = _this.state.open;\n\n      if (!open) {\n        return;\n      }\n\n      var moves = (_moves = {}, _moves[keyboardKey.ArrowDown] = 1, _moves[keyboardKey.ArrowUp] = -1, _moves);\n      var move = moves[keyboardKey.getCode(e)];\n\n      if (move === undefined) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var nextIndex = _this.getSelectedIndexAfterMove(move);\n\n      if (!multiple && selectOnNavigation) {\n        _this.makeSelectedItemActive(e, nextIndex);\n      }\n\n      _this.setState({\n        selectedIndex: nextIndex\n      });\n    };\n\n    _this.openOnSpace = function (e) {\n      var _e$target, _e$target2, _e$target3;\n\n      var shouldHandleEvent = _this.state.focus && !_this.state.open && keyboardKey.getCode(e) === keyboardKey.Spacebar;\n      var shouldPreventDefault = ((_e$target = e.target) == null ? void 0 : _e$target.tagName) !== 'INPUT' && ((_e$target2 = e.target) == null ? void 0 : _e$target2.tagName) !== 'TEXTAREA' && ((_e$target3 = e.target) == null ? void 0 : _e$target3.isContentEditable) !== true;\n\n      if (shouldHandleEvent) {\n        if (shouldPreventDefault) {\n          e.preventDefault();\n        }\n\n        _this.open(e);\n      }\n    };\n\n    _this.openOnArrow = function (e) {\n      var _this$state = _this.state,\n          focus = _this$state.focus,\n          open = _this$state.open;\n\n      if (focus && !open) {\n        var code = keyboardKey.getCode(e);\n\n        if (code === keyboardKey.ArrowDown || code === keyboardKey.ArrowUp) {\n          e.preventDefault();\n\n          _this.open(e);\n        }\n      }\n    };\n\n    _this.makeSelectedItemActive = function (e, selectedIndex) {\n      var _this$state2 = _this.state,\n          open = _this$state2.open,\n          value = _this$state2.value;\n      var multiple = _this.props.multiple;\n\n      var item = _this.getSelectedItem(selectedIndex);\n\n      var selectedValue = _get(item, 'value'); // prevent selecting null if there was no selected item value\n      // prevent selecting duplicate items when the dropdown is closed\n\n\n      if (_isNil(selectedValue) || !open) {\n        return value;\n      } // state value may be undefined\n\n\n      var newValue = multiple ? _union(value, [selectedValue]) : selectedValue;\n      var valueHasChanged = multiple ? !!_difference(newValue, value).length : newValue !== value;\n\n      if (valueHasChanged) {\n        // notify the onChange prop that the user is trying to change value\n        _this.setState({\n          value: newValue\n        });\n\n        _this.handleChange(e, newValue); // Heads up! This event handler should be called after `onChange`\n        // Notify the onAddItem prop if this is a new value\n\n\n        if (item['data-additional']) {\n          _invoke(_this.props, 'onAddItem', e, _extends({}, _this.props, {\n            value: selectedValue\n          }));\n        }\n      }\n\n      return value;\n    };\n\n    _this.selectItemOnEnter = function (e) {\n      var search = _this.props.search;\n      var _this$state3 = _this.state,\n          open = _this$state3.open,\n          selectedIndex = _this$state3.selectedIndex;\n\n      if (!open) {\n        return;\n      }\n\n      var shouldSelect = keyboardKey.getCode(e) === keyboardKey.Enter || // https://github.com/Semantic-Org/Semantic-UI-React/pull/3766\n      !search && keyboardKey.getCode(e) === keyboardKey.Spacebar;\n\n      if (!shouldSelect) {\n        return;\n      }\n\n      e.preventDefault();\n\n      var optionSize = _size(getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      }));\n\n      if (search && optionSize === 0) {\n        return;\n      }\n\n      var nextValue = _this.makeSelectedItemActive(e, selectedIndex); // This is required as selected value may be the same\n\n\n      _this.setState({\n        selectedIndex: getSelectedIndex({\n          additionLabel: _this.props.additionLabel,\n          additionPosition: _this.props.additionPosition,\n          allowAdditions: _this.props.allowAdditions,\n          deburr: _this.props.deburr,\n          multiple: _this.props.multiple,\n          search: _this.props.search,\n          selectedIndex: selectedIndex,\n          value: nextValue,\n          options: _this.props.options,\n          searchQuery: ''\n        })\n      });\n\n      _this.closeOnChange(e);\n\n      _this.clearSearchQuery();\n\n      if (search) {\n        _invoke(_this.searchRef.current, 'focus');\n      }\n    };\n\n    _this.removeItemOnBackspace = function (e) {\n      var _this$props3 = _this.props,\n          multiple = _this$props3.multiple,\n          search = _this$props3.search;\n      var _this$state4 = _this.state,\n          searchQuery = _this$state4.searchQuery,\n          value = _this$state4.value;\n      if (keyboardKey.getCode(e) !== keyboardKey.Backspace) return;\n      if (searchQuery || !search || !multiple || _isEmpty(value)) return;\n      e.preventDefault(); // remove most recent value\n\n      var newValue = _dropRight(value);\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.closeOnDocumentClick = function (e) {\n      if (!_this.props.closeOnBlur) return; // If event happened in the dropdown, ignore it\n\n      if (_this.ref.current && doesNodeContainClick(_this.ref.current, e)) return;\n\n      _this.close();\n    };\n\n    _this.handleMouseDown = function (e) {\n      _this.isMouseDown = true;\n\n      _invoke(_this.props, 'onMouseDown', e, _this.props);\n\n      document.addEventListener('mouseup', _this.handleDocumentMouseUp);\n    };\n\n    _this.handleDocumentMouseUp = function () {\n      _this.isMouseDown = false;\n      document.removeEventListener('mouseup', _this.handleDocumentMouseUp);\n    };\n\n    _this.handleClick = function (e) {\n      var _this$props4 = _this.props,\n          minCharacters = _this$props4.minCharacters,\n          search = _this$props4.search;\n      var _this$state5 = _this.state,\n          open = _this$state5.open,\n          searchQuery = _this$state5.searchQuery;\n\n      _invoke(_this.props, 'onClick', e, _this.props); // prevent closeOnDocumentClick()\n\n\n      e.stopPropagation();\n      if (!search) return _this.toggle(e);\n\n      if (open) {\n        _invoke(_this.searchRef.current, 'focus');\n\n        return;\n      }\n\n      if (searchQuery.length >= minCharacters || minCharacters === 1) {\n        _this.open(e);\n\n        return;\n      }\n\n      _invoke(_this.searchRef.current, 'focus');\n    };\n\n    _this.handleIconClick = function (e) {\n      var clearable = _this.props.clearable;\n\n      var hasValue = _this.hasValue();\n\n      _invoke(_this.props, 'onClick', e, _this.props); // prevent handleClick()\n\n\n      e.stopPropagation();\n\n      if (clearable && hasValue) {\n        _this.clearValue(e);\n      } else {\n        _this.toggle(e);\n      }\n    };\n\n    _this.handleItemClick = function (e, item) {\n      var _this$props5 = _this.props,\n          multiple = _this$props5.multiple,\n          search = _this$props5.search;\n      var currentValue = _this.state.value;\n      var value = item.value; // prevent toggle() in handleClick()\n\n      e.stopPropagation(); // prevent closeOnDocumentClick() if multiple or item is disabled\n\n      if (multiple || item.disabled) {\n        e.nativeEvent.stopImmediatePropagation();\n      }\n\n      if (item.disabled) {\n        return;\n      }\n\n      var isAdditionItem = item['data-additional'];\n      var newValue = multiple ? _union(_this.state.value, [value]) : value;\n      var valueHasChanged = multiple ? !!_difference(newValue, currentValue).length : newValue !== currentValue; // notify the onChange prop that the user is trying to change value\n\n      if (valueHasChanged) {\n        _this.setState({\n          value: newValue\n        });\n\n        _this.handleChange(e, newValue);\n      }\n\n      _this.clearSearchQuery();\n\n      if (search) {\n        _invoke(_this.searchRef.current, 'focus');\n      } else {\n        _invoke(_this.ref.current, 'focus');\n      }\n\n      _this.closeOnChange(e); // Heads up! This event handler should be called after `onChange`\n      // Notify the onAddItem prop if this is a new value\n\n\n      if (isAdditionItem) {\n        _invoke(_this.props, 'onAddItem', e, _extends({}, _this.props, {\n          value: value\n        }));\n      }\n    };\n\n    _this.handleFocus = function (e) {\n      var focus = _this.state.focus;\n      if (focus) return;\n\n      _invoke(_this.props, 'onFocus', e, _this.props);\n\n      _this.setState({\n        focus: true\n      });\n    };\n\n    _this.handleBlur = function (e) {\n      // Heads up! Don't remove this.\n      // https://github.com/Semantic-Org/Semantic-UI-React/issues/1315\n      var currentTarget = _get(e, 'currentTarget');\n\n      if (currentTarget && currentTarget.contains(document.activeElement)) return;\n      var _this$props6 = _this.props,\n          closeOnBlur = _this$props6.closeOnBlur,\n          multiple = _this$props6.multiple,\n          selectOnBlur = _this$props6.selectOnBlur; // do not \"blur\" when the mouse is down inside of the Dropdown\n\n      if (_this.isMouseDown) return;\n\n      _invoke(_this.props, 'onBlur', e, _this.props);\n\n      if (selectOnBlur && !multiple) {\n        _this.makeSelectedItemActive(e, _this.state.selectedIndex);\n\n        if (closeOnBlur) _this.close();\n      }\n\n      _this.setState({\n        focus: false\n      });\n\n      _this.clearSearchQuery();\n    };\n\n    _this.handleSearchChange = function (e, _ref) {\n      var value = _ref.value;\n      // prevent propagating to this.props.onChange()\n      e.stopPropagation();\n      var minCharacters = _this.props.minCharacters;\n      var open = _this.state.open;\n      var newQuery = value;\n\n      _invoke(_this.props, 'onSearchChange', e, _extends({}, _this.props, {\n        searchQuery: newQuery\n      }));\n\n      _this.setState({\n        searchQuery: newQuery,\n        selectedIndex: 0\n      }); // open search dropdown on search query\n\n\n      if (!open && newQuery.length >= minCharacters) {\n        _this.open();\n\n        return;\n      } // close search dropdown if search query is too small\n\n\n      if (open && minCharacters !== 1 && newQuery.length < minCharacters) _this.close();\n    };\n\n    _this.handleKeyDown = function (e) {\n      _this.moveSelectionOnKeyDown(e);\n\n      _this.openOnArrow(e);\n\n      _this.openOnSpace(e);\n\n      _this.selectItemOnEnter(e);\n\n      _invoke(_this.props, 'onKeyDown', e);\n    };\n\n    _this.getSelectedItem = function (selectedIndex) {\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      });\n      return _get(options, \"[\" + selectedIndex + \"]\");\n    };\n\n    _this.getItemByValue = function (value) {\n      var options = _this.props.options;\n      return _find(options, {\n        value: value\n      });\n    };\n\n    _this.getDropdownAriaOptions = function () {\n      var _this$props7 = _this.props,\n          loading = _this$props7.loading,\n          disabled = _this$props7.disabled,\n          search = _this$props7.search,\n          multiple = _this$props7.multiple;\n      var open = _this.state.open;\n      var ariaOptions = {\n        role: search ? 'combobox' : 'listbox',\n        'aria-busy': loading,\n        'aria-disabled': disabled,\n        'aria-expanded': !!open\n      };\n\n      if (ariaOptions.role === 'listbox') {\n        ariaOptions['aria-multiselectable'] = multiple;\n      }\n\n      return ariaOptions;\n    };\n\n    _this.clearSearchQuery = function () {\n      var searchQuery = _this.state.searchQuery;\n      if (searchQuery === undefined || searchQuery === '') return;\n\n      _this.setState({\n        searchQuery: ''\n      });\n    };\n\n    _this.handleLabelClick = function (e, labelProps) {\n      // prevent focusing search input on click\n      e.stopPropagation();\n\n      _this.setState({\n        selectedLabel: labelProps.value\n      });\n\n      _invoke(_this.props, 'onLabelClick', e, labelProps);\n    };\n\n    _this.handleLabelRemove = function (e, labelProps) {\n      // prevent focusing search input on click\n      e.stopPropagation();\n      var value = _this.state.value;\n\n      var newValue = _without(value, labelProps.value);\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.getSelectedIndexAfterMove = function (offset, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = _this.state.selectedIndex;\n      }\n\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      }); // Prevent infinite loop\n      // TODO: remove left part of condition after children API will be removed\n\n      if (options === undefined || _every(options, 'disabled')) return;\n      var lastIndex = options.length - 1;\n      var wrapSelection = _this.props.wrapSelection; // next is after last, wrap to beginning\n      // next is before first, wrap to end\n\n      var nextIndex = startIndex + offset; // if 'wrapSelection' is set to false and selection is after last or before first, it just does not change\n\n      if (!wrapSelection && (nextIndex > lastIndex || nextIndex < 0)) {\n        nextIndex = startIndex;\n      } else if (nextIndex > lastIndex) {\n        nextIndex = 0;\n      } else if (nextIndex < 0) {\n        nextIndex = lastIndex;\n      }\n\n      if (options[nextIndex].disabled) {\n        return _this.getSelectedIndexAfterMove(offset, nextIndex);\n      }\n\n      return nextIndex;\n    };\n\n    _this.handleIconOverrides = function (predefinedProps) {\n      var clearable = _this.props.clearable;\n      var classes = cx(clearable && _this.hasValue() && 'clear', predefinedProps.className);\n      return {\n        className: classes,\n        onClick: function onClick(e) {\n          _invoke(predefinedProps, 'onClick', e, predefinedProps);\n\n          _this.handleIconClick(e);\n        }\n      };\n    };\n\n    _this.clearValue = function (e) {\n      var multiple = _this.props.multiple;\n      var newValue = multiple ? [] : '';\n\n      _this.setState({\n        value: newValue\n      });\n\n      _this.handleChange(e, newValue);\n    };\n\n    _this.computeSearchInputTabIndex = function () {\n      var _this$props8 = _this.props,\n          disabled = _this$props8.disabled,\n          tabIndex = _this$props8.tabIndex;\n      if (!_isNil(tabIndex)) return tabIndex;\n      return disabled ? -1 : 0;\n    };\n\n    _this.computeSearchInputWidth = function () {\n      var searchQuery = _this.state.searchQuery;\n\n      if (_this.sizerRef.current && searchQuery) {\n        // resize the search input, temporarily show the sizer so we can measure it\n        _this.sizerRef.current.style.display = 'inline';\n        _this.sizerRef.current.textContent = searchQuery;\n        var searchWidth = Math.ceil(_this.sizerRef.current.getBoundingClientRect().width);\n\n        _this.sizerRef.current.style.removeProperty('display');\n\n        return searchWidth;\n      }\n    };\n\n    _this.computeTabIndex = function () {\n      var _this$props9 = _this.props,\n          disabled = _this$props9.disabled,\n          search = _this$props9.search,\n          tabIndex = _this$props9.tabIndex; // don't set a root node tabIndex as the search input has its own tabIndex\n\n      if (search) return undefined;\n      if (disabled) return -1;\n      return _isNil(tabIndex) ? 0 : tabIndex;\n    };\n\n    _this.handleSearchInputOverrides = function (predefinedProps) {\n      return {\n        onChange: function onChange(e, inputProps) {\n          _invoke(predefinedProps, 'onChange', e, inputProps);\n\n          _this.handleSearchChange(e, inputProps);\n        }\n      };\n    };\n\n    _this.hasValue = function () {\n      var multiple = _this.props.multiple;\n      var value = _this.state.value;\n      return multiple ? !_isEmpty(value) : !_isNil(value) && value !== '';\n    };\n\n    _this.scrollSelectedItemIntoView = function () {\n      if (!_this.ref.current) return;\n\n      var menu = _this.ref.current.querySelector('.menu.visible');\n\n      if (!menu) return;\n      var item = menu.querySelector('.item.selected');\n      if (!item) return;\n      var isOutOfUpperView = item.offsetTop < menu.scrollTop;\n      var isOutOfLowerView = item.offsetTop + item.clientHeight > menu.scrollTop + menu.clientHeight;\n\n      if (isOutOfUpperView) {\n        menu.scrollTop = item.offsetTop;\n      } else if (isOutOfLowerView) {\n        // eslint-disable-next-line no-mixed-operators\n        menu.scrollTop = item.offsetTop + item.clientHeight - menu.clientHeight;\n      }\n    };\n\n    _this.setOpenDirection = function () {\n      if (!_this.ref.current) return;\n\n      var menu = _this.ref.current.querySelector('.menu.visible');\n\n      if (!menu) return;\n\n      var dropdownRect = _this.ref.current.getBoundingClientRect();\n\n      var menuHeight = menu.clientHeight;\n      var spaceAtTheBottom = document.documentElement.clientHeight - dropdownRect.top - dropdownRect.height - menuHeight;\n      var spaceAtTheTop = dropdownRect.top - menuHeight;\n      var upward = spaceAtTheBottom < 0 && spaceAtTheTop > spaceAtTheBottom; // set state only if there's a relevant difference\n\n      if (!upward !== !_this.state.upward) {\n        _this.setState({\n          upward: upward\n        });\n      }\n    };\n\n    _this.open = function (e, triggerSetState) {\n      if (e === void 0) {\n        e = null;\n      }\n\n      if (triggerSetState === void 0) {\n        triggerSetState = true;\n      }\n\n      var _this$props10 = _this.props,\n          disabled = _this$props10.disabled,\n          search = _this$props10.search;\n      if (disabled) return;\n      if (search) _invoke(_this.searchRef.current, 'focus');\n\n      _invoke(_this.props, 'onOpen', e, _this.props);\n\n      if (triggerSetState) {\n        _this.setState({\n          open: true\n        });\n      }\n\n      _this.scrollSelectedItemIntoView();\n    };\n\n    _this.close = function (e, callback) {\n      if (callback === void 0) {\n        callback = _this.handleClose;\n      }\n\n      if (_this.state.open) {\n        _invoke(_this.props, 'onClose', e, _this.props);\n\n        _this.setState({\n          open: false\n        }, callback);\n      }\n    };\n\n    _this.handleClose = function () {\n      var hasSearchFocus = document.activeElement === _this.searchRef.current; // https://github.com/Semantic-Org/Semantic-UI-React/issues/627\n      // Blur the Dropdown on close so it is blurred after selecting an item.\n      // This is to prevent it from re-opening when switching tabs after selecting an item.\n\n      if (!hasSearchFocus && _this.ref.current) {\n        _this.ref.current.blur();\n      }\n\n      var hasDropdownFocus = document.activeElement === _this.ref.current;\n      var hasFocus = hasSearchFocus || hasDropdownFocus; // We need to keep the virtual model in sync with the browser focus change\n      // https://github.com/Semantic-Org/Semantic-UI-React/issues/692\n\n      _this.setState({\n        focus: hasFocus\n      });\n    };\n\n    _this.toggle = function (e) {\n      return _this.state.open ? _this.close(e) : _this.open(e);\n    };\n\n    _this.renderText = function () {\n      var _this$props11 = _this.props,\n          multiple = _this$props11.multiple,\n          placeholder = _this$props11.placeholder,\n          search = _this$props11.search,\n          text = _this$props11.text;\n      var _this$state6 = _this.state,\n          searchQuery = _this$state6.searchQuery,\n          selectedIndex = _this$state6.selectedIndex,\n          value = _this$state6.value,\n          open = _this$state6.open;\n\n      var hasValue = _this.hasValue();\n\n      var classes = cx(placeholder && !hasValue && 'default', 'text', search && searchQuery && 'filtered');\n      var _text = placeholder;\n      var selectedItem;\n\n      if (text) {\n        _text = text;\n      } else if (open && !multiple) {\n        selectedItem = _this.getSelectedItem(selectedIndex);\n      } else if (hasValue) {\n        selectedItem = _this.getItemByValue(value);\n      }\n\n      return DropdownText.create(selectedItem ? renderItemContent(selectedItem) : _text, {\n        defaultProps: {\n          className: classes\n        }\n      });\n    };\n\n    _this.renderSearchInput = function () {\n      var _this$props12 = _this.props,\n          search = _this$props12.search,\n          searchInput = _this$props12.searchInput;\n      var searchQuery = _this.state.searchQuery;\n      return search && /*#__PURE__*/React.createElement(Ref, {\n        innerRef: _this.searchRef\n      }, DropdownSearchInput.create(searchInput, {\n        defaultProps: {\n          style: {\n            width: _this.computeSearchInputWidth()\n          },\n          tabIndex: _this.computeSearchInputTabIndex(),\n          value: searchQuery\n        },\n        overrideProps: _this.handleSearchInputOverrides\n      }));\n    };\n\n    _this.renderSearchSizer = function () {\n      var _this$props13 = _this.props,\n          search = _this$props13.search,\n          multiple = _this$props13.multiple;\n      return search && multiple && /*#__PURE__*/React.createElement(\"span\", {\n        className: \"sizer\",\n        ref: _this.sizerRef\n      });\n    };\n\n    _this.renderLabels = function () {\n      var _this$props14 = _this.props,\n          multiple = _this$props14.multiple,\n          renderLabel = _this$props14.renderLabel;\n      var _this$state7 = _this.state,\n          selectedLabel = _this$state7.selectedLabel,\n          value = _this$state7.value;\n\n      if (!multiple || _isEmpty(value)) {\n        return;\n      }\n\n      var selectedItems = _map(value, _this.getItemByValue);\n\n      // if no item could be found for a given state value the selected item will be undefined\n      // compact the selectedItems so we only have actual objects left\n      return _map(_compact(selectedItems), function (item, index) {\n        var defaultProps = {\n          active: item.value === selectedLabel,\n          as: 'a',\n          key: getKeyOrValue(item.key, item.value),\n          onClick: _this.handleLabelClick,\n          onRemove: _this.handleLabelRemove,\n          value: item.value\n        };\n        return Label.create(renderLabel(item, index, defaultProps), {\n          defaultProps: defaultProps\n        });\n      });\n    };\n\n    _this.renderOptions = function () {\n      var _this$props15 = _this.props,\n          lazyLoad = _this$props15.lazyLoad,\n          multiple = _this$props15.multiple,\n          search = _this$props15.search,\n          noResultsMessage = _this$props15.noResultsMessage;\n      var _this$state8 = _this.state,\n          open = _this$state8.open,\n          selectedIndex = _this$state8.selectedIndex,\n          value = _this$state8.value; // lazy load, only render options when open\n\n      if (lazyLoad && !open) return null;\n      var options = getMenuOptions({\n        value: _this.state.value,\n        options: _this.props.options,\n        searchQuery: _this.state.searchQuery,\n        additionLabel: _this.props.additionLabel,\n        additionPosition: _this.props.additionPosition,\n        allowAdditions: _this.props.allowAdditions,\n        deburr: _this.props.deburr,\n        multiple: _this.props.multiple,\n        search: _this.props.search\n      });\n\n      if (noResultsMessage !== null && search && _isEmpty(options)) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"message\"\n        }, noResultsMessage);\n      }\n\n      var isActive = multiple ? function (optValue) {\n        return _includes(value, optValue);\n      } : function (optValue) {\n        return optValue === value;\n      };\n      return _map(options, function (opt, i) {\n        return DropdownItem.create(_extends({\n          active: isActive(opt.value),\n          onClick: _this.handleItemClick,\n          selected: selectedIndex === i\n        }, opt, {\n          key: getKeyOrValue(opt.key, opt.value),\n          // Needed for handling click events on disabled items\n          style: _extends({}, opt.style, {\n            pointerEvents: 'all'\n          })\n        }));\n      });\n    };\n\n    _this.renderMenu = function () {\n      var _this$props16 = _this.props,\n          children = _this$props16.children,\n          direction = _this$props16.direction,\n          header = _this$props16.header;\n      var open = _this.state.open;\n\n      var ariaOptions = _this.getDropdownMenuAriaOptions(); // single menu child\n\n\n      if (!childrenUtils.isNil(children)) {\n        var menuChild = Children.only(children);\n        var className = cx(direction, useKeyOnly(open, 'visible'), menuChild.props.className);\n        return /*#__PURE__*/cloneElement(menuChild, _extends({\n          className: className\n        }, ariaOptions));\n      }\n\n      return /*#__PURE__*/React.createElement(DropdownMenu, _extends({}, ariaOptions, {\n        direction: direction,\n        open: open\n      }), DropdownHeader.create(header, {\n        autoGenerateKey: false\n      }), _this.renderOptions());\n    };\n\n    return _this;\n  }\n\n  var _proto = Dropdown.prototype;\n\n  _proto.getInitialAutoControlledState = function getInitialAutoControlledState() {\n    return {\n      focus: false,\n      searchQuery: ''\n    };\n  };\n\n  Dropdown.getAutoControlledStateFromProps = function getAutoControlledStateFromProps(nextProps, computedState, prevState) {\n    // These values are stored only for a comparison on next getAutoControlledStateFromProps()\n    var derivedState = {\n      __options: nextProps.options,\n      __value: computedState.value\n    }; // The selected index is only dependent:\n\n    var shouldComputeSelectedIndex = // On value change\n    !shallowEqual(prevState.__value, computedState.value) || // On option keys/values, we only check those properties to avoid recursive performance impacts.\n    // https://github.com/Semantic-Org/Semantic-UI-React/issues/3000\n    !_isEqual(getKeyAndValues(nextProps.options), getKeyAndValues(prevState.__options));\n\n    if (shouldComputeSelectedIndex) {\n      derivedState.selectedIndex = getSelectedIndex({\n        additionLabel: nextProps.additionLabel,\n        additionPosition: nextProps.additionPosition,\n        allowAdditions: nextProps.allowAdditions,\n        deburr: nextProps.deburr,\n        multiple: nextProps.multiple,\n        search: nextProps.search,\n        selectedIndex: computedState.selectedIndex,\n        value: computedState.value,\n        options: nextProps.options,\n        searchQuery: computedState.searchQuery\n      });\n    }\n\n    return derivedState;\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    var open = this.state.open;\n\n    if (open) {\n      this.open(null, false);\n    }\n  };\n\n  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    return !shallowEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // eslint-disable-line complexity\n    var _this$props17 = this.props,\n        closeOnBlur = _this$props17.closeOnBlur,\n        minCharacters = _this$props17.minCharacters,\n        openOnFocus = _this$props17.openOnFocus,\n        search = _this$props17.search;\n    /* eslint-disable no-console */\n\n    if (process.env.NODE_ENV !== 'production') {\n      // in development, validate value type matches dropdown type\n      var isNextValueArray = Array.isArray(this.props.value);\n\n      var hasValue = _has(this.props, 'value');\n\n      if (hasValue && this.props.multiple && !isNextValueArray) {\n        console.error('Dropdown `value` must be an array when `multiple` is set.' + (\" Received type: `\" + Object.prototype.toString.call(this.props.value) + \"`.\"));\n      } else if (hasValue && !this.props.multiple && isNextValueArray) {\n        console.error('Dropdown `value` must not be an array when `multiple` is not set.' + ' Either set `multiple={true}` or use a string or number value.');\n      }\n    }\n    /* eslint-enable no-console */\n    // focused / blurred\n\n\n    if (!prevState.focus && this.state.focus) {\n      if (!this.isMouseDown) {\n        var openable = !search || search && minCharacters === 1 && !this.state.open;\n        if (openOnFocus && openable) this.open();\n      }\n    } else if (prevState.focus && !this.state.focus) {\n      if (!this.isMouseDown && closeOnBlur) {\n        this.close();\n      }\n    } // opened / closed\n\n\n    if (!prevState.open && this.state.open) {\n      this.setOpenDirection();\n      this.scrollSelectedItemIntoView();\n    } else if (prevState.open && !this.state.open) {}\n\n    if (prevState.selectedIndex !== this.state.selectedIndex) {\n      this.scrollSelectedItemIntoView();\n    }\n  } // ----------------------------------------\n  // Document Event Handlers\n  // ----------------------------------------\n  // onChange needs to receive a value\n  // can't rely on props.value if we are controlled\n  ;\n\n  _proto.getDropdownMenuAriaOptions = function getDropdownMenuAriaOptions() {\n    var _this$props18 = this.props,\n        search = _this$props18.search,\n        multiple = _this$props18.multiple;\n    var ariaOptions = {};\n\n    if (search) {\n      ariaOptions['aria-multiselectable'] = multiple;\n      ariaOptions.role = 'listbox';\n    }\n\n    return ariaOptions;\n  } // ----------------------------------------\n  // Setters\n  // ----------------------------------------\n  ;\n\n  _proto.render = function render() {\n    var _this$props19 = this.props,\n        basic = _this$props19.basic,\n        button = _this$props19.button,\n        className = _this$props19.className,\n        compact = _this$props19.compact,\n        disabled = _this$props19.disabled,\n        error = _this$props19.error,\n        fluid = _this$props19.fluid,\n        floating = _this$props19.floating,\n        icon = _this$props19.icon,\n        inline = _this$props19.inline,\n        item = _this$props19.item,\n        labeled = _this$props19.labeled,\n        loading = _this$props19.loading,\n        multiple = _this$props19.multiple,\n        pointing = _this$props19.pointing,\n        search = _this$props19.search,\n        selection = _this$props19.selection,\n        scrolling = _this$props19.scrolling,\n        simple = _this$props19.simple,\n        trigger = _this$props19.trigger;\n    var _this$state9 = this.state,\n        focus = _this$state9.focus,\n        open = _this$state9.open,\n        upward = _this$state9.upward; // Classes\n\n    var classes = cx('ui', useKeyOnly(open, 'active visible'), useKeyOnly(disabled, 'disabled'), useKeyOnly(error, 'error'), useKeyOnly(loading, 'loading'), useKeyOnly(basic, 'basic'), useKeyOnly(button, 'button'), useKeyOnly(compact, 'compact'), useKeyOnly(fluid, 'fluid'), useKeyOnly(floating, 'floating'), useKeyOnly(inline, 'inline'), // TODO: consider augmentation to render Dropdowns as Button/Menu, solves icon/link item issues\n    // https://github.com/Semantic-Org/Semantic-UI-React/issues/401#issuecomment-240487229\n    // TODO: the icon class is only required when a dropdown is a button\n    // useKeyOnly(icon, 'icon'),\n    useKeyOnly(labeled, 'labeled'), useKeyOnly(item, 'item'), useKeyOnly(multiple, 'multiple'), useKeyOnly(search, 'search'), useKeyOnly(selection, 'selection'), useKeyOnly(simple, 'simple'), useKeyOnly(scrolling, 'scrolling'), useKeyOnly(upward, 'upward'), useKeyOrValueAndKey(pointing, 'pointing'), 'dropdown', className);\n    var rest = getUnhandledProps(Dropdown, this.props);\n    var ElementType = getElementType(Dropdown, this.props);\n    var ariaOptions = this.getDropdownAriaOptions(ElementType, this.props);\n    return /*#__PURE__*/React.createElement(Ref, {\n      innerRef: this.ref\n    }, /*#__PURE__*/React.createElement(ElementType, _extends({}, rest, ariaOptions, {\n      className: classes,\n      onBlur: this.handleBlur,\n      onClick: this.handleClick,\n      onKeyDown: this.handleKeyDown,\n      onMouseDown: this.handleMouseDown,\n      onFocus: this.handleFocus,\n      onChange: this.handleChange,\n      tabIndex: this.computeTabIndex()\n    }), this.renderLabels(), this.renderSearchInput(), this.renderSearchSizer(), trigger || this.renderText(), Icon.create(icon, {\n      overrideProps: this.handleIconOverrides,\n      autoGenerateKey: false\n    }), this.renderMenu(), open && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"keydown\",\n      on: this.closeOnEscape\n    }), open && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"click\",\n      on: this.closeOnDocumentClick\n    }), focus && /*#__PURE__*/React.createElement(EventStack, {\n      name: \"keydown\",\n      on: this.removeItemOnBackspace\n    })));\n  };\n\n  return Dropdown;\n}(Component);\n\nDropdown.handledProps = [\"additionLabel\", \"additionPosition\", \"allowAdditions\", \"as\", \"basic\", \"button\", \"children\", \"className\", \"clearable\", \"closeOnBlur\", \"closeOnChange\", \"closeOnEscape\", \"compact\", \"deburr\", \"defaultOpen\", \"defaultSearchQuery\", \"defaultSelectedLabel\", \"defaultUpward\", \"defaultValue\", \"direction\", \"disabled\", \"error\", \"floating\", \"fluid\", \"header\", \"icon\", \"inline\", \"item\", \"labeled\", \"lazyLoad\", \"loading\", \"minCharacters\", \"multiple\", \"noResultsMessage\", \"onAddItem\", \"onBlur\", \"onChange\", \"onClick\", \"onClose\", \"onFocus\", \"onLabelClick\", \"onMouseDown\", \"onOpen\", \"onSearchChange\", \"open\", \"openOnFocus\", \"options\", \"placeholder\", \"pointing\", \"renderLabel\", \"scrolling\", \"search\", \"searchInput\", \"searchQuery\", \"selectOnBlur\", \"selectOnNavigation\", \"selectedLabel\", \"selection\", \"simple\", \"tabIndex\", \"text\", \"trigger\", \"upward\", \"value\", \"wrapSelection\"];\nexport { Dropdown as default };\nDropdown.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Label prefixed to an option added by a user. */\n  additionLabel: PropTypes.oneOfType([PropTypes.element, PropTypes.string]),\n\n  /** Position of the `Add: ...` option in the dropdown list ('top' or 'bottom'). */\n  additionPosition: PropTypes.oneOf(['top', 'bottom']),\n\n  /**\n   * Allow user additions to the list of options (boolean).\n   * Requires the use of `selection`, `options` and `search`.\n   */\n  allowAdditions: customPropTypes.every([customPropTypes.demand(['options', 'selection', 'search']), PropTypes.bool]),\n\n  /** A Dropdown can reduce its complexity. */\n  basic: PropTypes.bool,\n\n  /** Format the Dropdown to appear as a button. */\n  button: PropTypes.bool,\n\n  /** Primary content. */\n  children: customPropTypes.every([customPropTypes.disallow(['options', 'selection']), customPropTypes.givenProps({\n    children: PropTypes.any.isRequired\n  }, PropTypes.element.isRequired)]),\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Using the clearable setting will let users remove their selection from a dropdown. */\n  clearable: PropTypes.bool,\n\n  /** Whether or not the menu should close when the dropdown is blurred. */\n  closeOnBlur: PropTypes.bool,\n\n  /** Whether or not the dropdown should close when the escape key is pressed. */\n  closeOnEscape: PropTypes.bool,\n\n  /**\n   * Whether or not the menu should close when a value is selected from the dropdown.\n   * By default, multiple selection dropdowns will remain open on change, while single\n   * selection dropdowns will close on change.\n   */\n  closeOnChange: PropTypes.bool,\n\n  /** A compact dropdown has no minimum width. */\n  compact: PropTypes.bool,\n\n  /** Whether or not the dropdown should strip diacritics in options and input search */\n  deburr: PropTypes.bool,\n\n  /** Initial value of open. */\n  defaultOpen: PropTypes.bool,\n\n  /** Initial value of searchQuery. */\n  defaultSearchQuery: PropTypes.string,\n\n  /** Currently selected label in multi-select. */\n  defaultSelectedLabel: customPropTypes.every([customPropTypes.demand(['multiple']), PropTypes.oneOfType([PropTypes.number, PropTypes.string])]),\n\n  /** Initial value of upward. */\n  defaultUpward: PropTypes.bool,\n\n  /** Initial value or value array if multiple. */\n  defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.bool, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]))]),\n\n  /** A dropdown menu can open to the left or to the right. */\n  direction: PropTypes.oneOf(['left', 'right']),\n\n  /** A disabled dropdown menu or item does not allow user interaction. */\n  disabled: PropTypes.bool,\n\n  /** An errored dropdown can alert a user to a problem. */\n  error: PropTypes.bool,\n\n  /** A dropdown menu can contain floated content. */\n  floating: PropTypes.bool,\n\n  /** A dropdown can take the full width of its parent */\n  fluid: PropTypes.bool,\n\n  /** A dropdown menu can contain a header. */\n  header: PropTypes.node,\n\n  /** Shorthand for Icon. */\n  icon: PropTypes.oneOfType([PropTypes.node, PropTypes.object]),\n\n  /** A dropdown can be formatted to appear inline in other content. */\n  inline: PropTypes.bool,\n\n  /** A dropdown can be formatted as a Menu item. */\n  item: PropTypes.bool,\n\n  /** A dropdown can be labeled. */\n  labeled: PropTypes.bool,\n\n  /** A dropdown can defer rendering its options until it is open. */\n  lazyLoad: PropTypes.bool,\n\n  /** A dropdown can show that it is currently loading data. */\n  loading: PropTypes.bool,\n\n  /** The minimum characters for a search to begin showing results. */\n  minCharacters: PropTypes.number,\n\n  /** A selection dropdown can allow multiple selections. */\n  multiple: PropTypes.bool,\n\n  /** Message to display when there are no results. */\n  noResultsMessage: PropTypes.node,\n\n  /**\n   * Called when a user adds a new item. Use this to update the options list.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props and the new item's value.\n   */\n  onAddItem: PropTypes.func,\n\n  /**\n   * Called on blur.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onBlur: PropTypes.func,\n\n  /**\n   * Called when the user attempts to change the value.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props and proposed value.\n   */\n  onChange: PropTypes.func,\n\n  /**\n   * Called on click.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClick: PropTypes.func,\n\n  /**\n   * Called when a close event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * Called on focus.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onFocus: PropTypes.func,\n\n  /**\n   * Called when a multi-select label is clicked.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All label props.\n   */\n  onLabelClick: PropTypes.func,\n\n  /**\n   * Called on mousedown.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onMouseDown: PropTypes.func,\n\n  /**\n   * Called when an open event happens.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props.\n   */\n  onOpen: PropTypes.func,\n\n  /**\n   * Called on search input change.\n   *\n   * @param {SyntheticEvent} event - React's original SyntheticEvent.\n   * @param {object} data - All props, includes current value of searchQuery.\n   */\n  onSearchChange: PropTypes.func,\n\n  /** Controls whether or not the dropdown menu is displayed. */\n  open: PropTypes.bool,\n\n  /** Whether or not the menu should open when the dropdown is focused. */\n  openOnFocus: PropTypes.bool,\n\n  /** Array of Dropdown.Item props e.g. `{ text: '', value: '' }` */\n  options: customPropTypes.every([customPropTypes.disallow(['children']), PropTypes.arrayOf(PropTypes.shape(DropdownItem.propTypes))]),\n\n  /** Placeholder text. */\n  placeholder: PropTypes.string,\n\n  /** A dropdown can be formatted so that its menu is pointing. */\n  pointing: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['left', 'right', 'top', 'top left', 'top right', 'bottom', 'bottom left', 'bottom right'])]),\n\n  /**\n   * Mapped over the active items and returns shorthand for the active item Labels.\n   * Only applies to `multiple` Dropdowns.\n   *\n   * @param {object} item - A currently active dropdown item.\n   * @param {number} index - The current index.\n   * @param {object} defaultLabelProps - The default props for an active item Label.\n   * @returns {*} Shorthand for a Label.\n   */\n  renderLabel: PropTypes.func,\n\n  /** A dropdown can have its menu scroll. */\n  scrolling: PropTypes.bool,\n\n  /**\n   * A selection dropdown can allow a user to search through a large list of choices.\n   * Pass a function here to replace the default search.\n   */\n  search: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n\n  /** A shorthand for a search input. */\n  searchInput: PropTypes.oneOfType([PropTypes.array, PropTypes.node, PropTypes.object]),\n\n  /** Current value of searchQuery. Creates a controlled component. */\n  searchQuery: PropTypes.string,\n  // TODO 'searchInMenu' or 'search='in menu' or ???  How to handle this markup and functionality?\n\n  /** Define whether the highlighted item should be selected on blur. */\n  selectOnBlur: PropTypes.bool,\n\n  /**\n   * Whether or not to change the value when navigating the menu using arrow keys.\n   * Setting to false will require enter or left click to confirm a choice.\n   */\n  selectOnNavigation: PropTypes.bool,\n\n  /** Currently selected label in multi-select. */\n  selectedLabel: customPropTypes.every([customPropTypes.demand(['multiple']), PropTypes.oneOfType([PropTypes.string, PropTypes.number])]),\n\n  /** A dropdown can be used to select between choices in a form. */\n  selection: customPropTypes.every([customPropTypes.disallow(['children']), customPropTypes.demand(['options']), PropTypes.bool]),\n\n  /** A simple dropdown can open without Javascript. */\n  simple: PropTypes.bool,\n\n  /** A dropdown can receive focus. */\n  tabIndex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /** The text displayed in the dropdown, usually for the active item. */\n  text: PropTypes.string,\n\n  /** Custom element to trigger the menu to become visible. Takes place of 'text'. */\n  trigger: customPropTypes.every([customPropTypes.disallow(['selection', 'text']), PropTypes.node]),\n\n  /** Current value or value array if multiple. Creates a controlled component. */\n  value: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number]))]),\n\n  /** Controls whether the dropdown will open upward. */\n  upward: PropTypes.bool,\n\n  /**\n   * A dropdown will go to the last element when ArrowUp is pressed on the first,\n   * or go to the first when ArrowDown is pressed on the last( aka infinite selection )\n   */\n  wrapSelection: PropTypes.bool\n} : {};\nDropdown.defaultProps = {\n  additionLabel: 'Add ',\n  additionPosition: 'top',\n  closeOnBlur: true,\n  closeOnEscape: true,\n  deburr: false,\n  icon: 'dropdown',\n  minCharacters: 1,\n  noResultsMessage: 'No results found.',\n  openOnFocus: true,\n  renderLabel: renderItemContent,\n  searchInput: 'text',\n  selectOnBlur: true,\n  selectOnNavigation: true,\n  wrapSelection: true\n};\nDropdown.autoControlledProps = ['open', 'searchQuery', 'selectedLabel', 'value', 'upward'];\nDropdown.Divider = DropdownDivider;\nDropdown.Header = DropdownHeader;\nDropdown.Item = DropdownItem;\nDropdown.Menu = DropdownMenu;\nDropdown.SearchInput = DropdownSearchInput;\nDropdown.Text = DropdownText;"]},"metadata":{},"sourceType":"module"}